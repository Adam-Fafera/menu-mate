<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-10 p-4">
    @for (item of items; track item) {
    <p-card (click)="showDialog(item)" [style]="{ width: '18rem',height:'20rem', overflow: 'hidden' }" class="cursor-pointer">
        <ng-template #header>
            <img alt="Card" class="h-32 w-full object-cover" src="{{item.image}}" />
        </ng-template>
        <ng-template #title> {{item.name}} </ng-template>
        <ng-template #subtitle> {{item.price}} {{getCurrencySymbol(item.currency)}}</ng-template>
        <div class="overflow-hidden">
            <p class="text-ellipsis overflow-hidden">
                {{item.description}}
            </p>
        </div>
    </p-card>
    }
</div>

<p-dialog [(visible)]="visible" [modal]="true" [style]="{ width: '30rem' }">   
    <ng-template #header>
        <div class="inline-flex items-center justify-center gap-2">
            <span class="font-bold text-2xl whitespace-nowrap"> {{selectedItem()?.name}} </span>
        </div>
    </ng-template>
    <p-tabs value="0">
        <p-tablist>
            <p-tab value="0">General Info</p-tab>
            <p-tab value="1">Nutrition Facts</p-tab>
            <p-tab value="2">Reviews</p-tab>
        </p-tablist>
        <p-tabpanels>
            <p-tabpanel value="0">
                <img alt="" class="h-72 w-full rounded-lg object-cover" src="{{selectedItem()?.image}}" />
                <p class="mt-3 text-2xl">
                    {{selectedItem()?.name}}
                </p>
                <p class="mt-3 overflow-hidden text-ellipsis whitespace-nowrap w-full" style="max-width: 28rem;">
                    {{selectedItem()?.description}}
                </p>
                <p class="text-zinc-500">
                    {{selectedItem()?.price}}
                    {{getCurrencySymbol(selectedItem()?.currency)}}
                </p>
            </p-tabpanel>
            <p-tabpanel value="1">
                <div class="m-0">
                    <table class="min-w-full border border-opacity-20 border-gray-300">
                        <thead>
                            <tr>
                                <th class="px-4 py-2 border">Macro</th>
                                <th class="px-4 py-2 border">Amount</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="px-4 py-2 border">Calories (kcal)</td>
                                <td class="px-4 py-2 border">{{ selectedItem()?.calories }}</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 border">Fats (g)</td>
                                <td class="px-4 py-2 border">{{ selectedItem()?.fats }}</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 border">Carbs (g)</td>
                                <td class="px-4 py-2 border">{{ selectedItem()?.carbs }}</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2 border">Proteins (g)</td>
                                <td class="px-4 py-2 border">{{ selectedItem()?.proteins }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </p-tabpanel>
            <p-tabpanel value="2">
                <app-review-item [urlID]="selectedItem()?.id"></app-review-item>
            </p-tabpanel>
        </p-tabpanels>
    </p-tabs>
    <ng-template #footer>
        <p-button label="Propose edit" [text]="true" severity="secondary" (click)="visible = false" />
        <p-button label="Review" [outlined]="true" severity="secondary" (click)="visible = false" />
    </ng-template>
</p-dialog>
